{"version":3,"sources":["webpack:///./src/components/Ticket/styles.js","webpack:///./src/components/Ticket/index.js","webpack:///./src/hooks/useConfigData.js","webpack:///./src/pages/e-ticket.js","webpack:///./src/assets/images/img1.jpg","webpack:///./src/assets/images/img2.jpg","webpack:///./src/helpers/getQueryValue.js","webpack:///./src/assets/images/QR.jpg"],"names":["styWrapper","name","styles","styButtonWrapper","styTicket","TicketData","_ref","guest","configData","message","setMessage","useState","isSubmitting","setIsSubmitting","console","log","GOOGLE_SHEET_URL","images","img1","img2","updateWishlist","async","res","fetch","jsText","text","match","wishlistData","JSON","parse","wishlistWithRandomImages","map","item","image","Math","floor","random","length","err","error","useEffect","intervalId","setInterval","clearInterval","handleSubmitAttendance","isAttending","payload","code","method","mode","headers","body","stringify","catch","setTimeout","alert","redirectURL","encodeURIComponent","window","location","href","___EmotionJSX","css","className","style","marginBottom","color","fontFamily","fontSize","lineHeight","display","justifyContent","alignItems","gap","flexWrap","textAlign","src","qrImage","alt","width","height","borderRadius","border","margin","marginTop","maxWidth","marginLeft","marginRight","htmlFor","fontWeight","id","value","onChange","e","target","placeholder","rows","padding","resize","onClick","disabled","Link","to","defaultProps","useConfigData","loading","setLoading","data","setData","handleFetch","offlineConfigData","refetch","ETicket","codeEticket","getQueryValue","nameEticket","alreadyChecked","useRef","setValue","selectedGuest","setSelectedGuest","isShowTicket","setIsShowTicket","useGuestData","handleCheckTicket","useCallback","tempValue","guestCode","toUpperCase","find","g","includes","assign","current","MainLayout","Ticket","module","exports","testedName","replace","results","RegExp","exec","search","decodeURIComponent"],"mappings":"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","file":"component---src-pages-e-ticket-js-ea5b288769a8ea8933c6.js","sourcesContent":["import { css } from '@emotion/core';\r\n\r\nexport const styWrapper = css`\r\n  @import url('https://fonts.googleapis.com/css?family=Roboto:300,400');\r\n  @import url('https://fonts.googleapis.com/css2?family=Pacifico&family=Work+Sans:wght@300;400;600&display=swap');\r\n\r\n  .container {\r\n    margin: 30px auto;\r\n    overflow: hidden;\r\n    box-shadow: 0 0 12px rgba(202, 202, 204, 0.5);\r\n    background-color: #fffafc;\r\n    border-radius: 12px;\r\n    padding: 0 24px;\r\n  }\r\n\r\n  .details {\r\n    color: #555;\r\n    padding: 24px 0;\r\n    border-top: 1px dashed #f7a6c1;\r\n    font-family: 'UVN Chinh Luan', 'Work Sans', sans-serif;\r\n    text-align: center;\r\n  }\r\n\r\n  .tinfo {\r\n    font-size: 11px;\r\n    font-weight: 400;\r\n    color: #f14e95;\r\n    text-transform: uppercase;\r\n    letter-spacing: 1px;\r\n    margin: 20px 0 6px;\r\n  }\r\n\r\n  .tdata {\r\n    font-size: 1em;\r\n    font-weight: 400;\r\n    margin: 0;\r\n    color: #333;\r\n  }\r\n\r\n  .tdata.additional {\r\n    font-size: 14px;\r\n    color: #555;\r\n    line-height: 1.6;\r\n  }\r\n\r\n  .name {\r\n    font-size: 1.4em;\r\n    font-weight: 600;\r\n    color: #e91e63;\r\n  }\r\n\r\n  #qrcode {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    margin: 20px auto;\r\n  }\r\n\r\n  .badge {\r\n    font-size: 12px;\r\n    border-radius: 8px;\r\n    padding: 4px 10px;\r\n  }\r\n\r\n  .badge-success {\r\n    background-color: #a5d6a7;\r\n    color: #1b5e20;\r\n  }\r\n\r\n  .btn {\r\n    margin-right: 4px;\r\n    margin-top: 16px;\r\n    font-family: 'UVN Chinh Luan', 'Work Sans', sans-serif;\r\n    font-size: 14px;\r\n    font-weight: 500;\r\n    border-radius: 30px;\r\n    transition: 0.3s;\r\n    padding: 10px 24px;\r\n    border: none;\r\n    cursor: pointer;\r\n  }\r\n\r\n  .primary {\r\n    background: #f14e95;\r\n    color: #fff;\r\n  }\r\n\r\n  .btn.attend {\r\n    background: #ff80ab;\r\n    color: white;\r\n  }\r\n\r\n  .btn.decline {\r\n    background: #ccc;\r\n    color: #333;\r\n  }\r\n\r\n  ul {\r\n    text-align: left;\r\n    margin: 12px auto;\r\n    display: inline-block;\r\n    padding-left: 20px;\r\n  }\r\n\r\n  li {\r\n    margin-bottom: 8px;\r\n  }\r\n\r\n  textarea {\r\n    font-family: 'UVN Chinh Luan', sans-serif;\r\n  }\r\n`;\r\n\r\nexport const styButtonWrapper = css`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  gap: 16px;\r\n  margin-top: 30px;\r\n  flex-wrap: wrap;\r\n`;\r\n\r\nexport const styTicket = css`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  min-height: calc(100vh - 18px);\r\n  padding: 0 20px;\r\n\r\n  .homepage {\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    align-items: center;\r\n    max-width: 100%;\r\n  }\r\n\r\n  .title {\r\n    font-family: 'UVN Chinh Luan', cursive;\r\n    font-weight: 600;\r\n    letter-spacing: 4px;\r\n    font-size: 45px;\r\n    user-select: none;\r\n    margin-top: 20px;\r\n    text-align: center;\r\n  }\r\n\r\n  .sub-title-ticket {\r\n    font-weight: 500;\r\n    text-transform: uppercase;\r\n    letter-spacing: 1px;\r\n    font-size: 1.7rem;\r\n    user-select: none;\r\n    margin-top: 20px;\r\n    text-align: center;\r\n  }\r\n\r\n  .input-ticket {\r\n    width: 85vw;\r\n    min-width: auto;\r\n\r\n    input {\r\n      font-family: 'UVN Chinh Luan', 'Work Sans', Courier, monospace;\r\n      font-size: 18px;\r\n      width: 100%;\r\n      text-align: center;\r\n      border-radius: 12px;\r\n      padding: 10px 30px 10px 10px;\r\n      background: transparent;\r\n      border: 0.5px solid rgba(0, 0, 0, 0.3);\r\n    }\r\n\r\n    input[type='text']:disabled {\r\n      background: #dddddd;\r\n    }\r\n  }\r\n`;\r\n","import React, { useState } from 'react';\r\nimport QRCode from 'react-qr-code';\r\nimport { object } from 'prop-types';\r\nimport { Link } from 'gatsby';\r\n\r\nimport { styWrapper } from './styles';\r\nimport { styButtonWrapper } from './styles';\r\nimport qrImage from '@assets/images/QR.jpg';\r\n\r\nimport img1 from '@assets/images/img1.jpg';\r\nimport img2 from '@assets/images/img2.jpg';\r\n\r\nfunction TicketData({ guest, configData }) {\r\n  const [message, setMessage] = useState('');\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n  console.log('useState:', useState);\r\n  // Thay URL Google Apps Script của bạn vào đây\r\n  const GOOGLE_SHEET_URL =\r\n    'https://script.google.com/macros/s/AKfycbyydU9gc_-WxxcI7P2ZI0aXpaJEG5xXpvCDvuL2NSXDJ1NlGf33GiRZN0Fp1Ek-mg5tmQ/exec';\r\n\r\n  const images = [img1, img2]; // mảng ảnh để random\r\n\r\n  const updateWishlist = async () => {\r\n    try {\r\n      const res = await fetch(GOOGLE_SHEET_URL);\r\n      const jsText = await res.text();\r\n      console.log('✅ Wishlist cập nhật:', jsText);\r\n\r\n      const match = jsText.match(/export const wishlist = (.*);/s);\r\n      if (match) {\r\n        const wishlistData = JSON.parse(match[1]);\r\n        console.log('📦 Parsed wishlist:', wishlistData);\r\n\r\n        // gán ảnh random cho mỗi item\r\n        const wishlistWithRandomImages = wishlistData.map((item) => ({\r\n          ...item,\r\n          image: images[Math.floor(Math.random() * images.length)],\r\n        }));\r\n\r\n        // cập nhật state hoặc xử lý tiếp\r\n        console.log('📦 Wishlist với ảnh random:', wishlistWithRandomImages);\r\n        // ví dụ: setWishlist(wishlistWithRandomImages);\r\n      }\r\n    } catch (err) {\r\n      console.error('❌ Không thể cập nhật wishlist', err);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    updateWishlist();\r\n    const intervalId = setInterval(updateWishlist, 5 * 60 * 1000);\r\n    return () => clearInterval(intervalId);\r\n  }, []);\r\n\r\n  const handleSubmitAttendance = (isAttending) => {\r\n    setIsSubmitting(true);\r\n\r\n    const payload = {\r\n      name: guest.name,\r\n      code: guest.code,\r\n      isAttending,\r\n      message,\r\n    };\r\n\r\n    // 🚀 Gửi dữ liệu ngay lập tức (không chờ phản hồi)\r\n    fetch(GOOGLE_SHEET_URL, {\r\n      method: 'POST',\r\n      mode: 'no-cors',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify(payload),\r\n    }).catch((err) => {\r\n      // Không ảnh hưởng UI, chỉ log nếu cần\r\n      console.error('Lỗi gửi dữ liệu:', err);\r\n    });\r\n\r\n    // ⏳ Sau 2 giây, báo thành công và quay về trang chính\r\n    setTimeout(() => {\r\n      alert(\r\n        isAttending\r\n          ? 'Cảm ơn bạn đã xác nhận tham gia nhé! 💖'\r\n          : 'Rất tiếc bạn không thể tham dự, cảm ơn bạn đã thông báo nhé!',\r\n      );\r\n\r\n      setMessage('');\r\n      setIsSubmitting(false);\r\n      const redirectURL = `/bangquynh-wp/?type=invitation&to=${encodeURIComponent(guest.name)}&code=${guest.code}`;\r\n      window.location.href = redirectURL;\r\n    }, 2000);\r\n  };\r\n\r\n  return (\r\n    <div css={styWrapper} className=\"container\">\r\n      <h2 style={{ marginBottom: 16, color: '#e91e63', fontFamily: \"'Pacifico', cursive\" }}>\r\n        ✨ Gửi Lời Chúc Dễ Thương ✨\r\n      </h2>\r\n\r\n      <p style={{ marginBottom: 12, fontSize: 16, lineHeight: 1.5, color: '#555' }}>\r\n        Tụi mình <b>rất mong được gặp bạn</b> trong ngày vui nè 🎉 Nhưng nếu bạn bị deadline dí, vướng công chuyện, hay\r\n        bị kẹt ở vũ trụ song song 🌀 thì vẫn có thể “góp vui từ xa” bằng cách cực kỳ hiện đại phía dưới đây nha 😚\r\n      </p>\r\n\r\n      <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center', gap: 32, flexWrap: 'wrap' }}>\r\n        {/* QR Code chuyển khoản */}\r\n        <div style={{ textAlign: 'center' }}>\r\n          <img\r\n            src={qrImage}\r\n            alt=\"Mã QR chuyển khoản ngân hàng\"\r\n            style={{\r\n              width: 220,\r\n              height: 220,\r\n              borderRadius: 12,\r\n              border: '1px solid #ccc',\r\n              display: 'block',\r\n              margin: '0 auto',\r\n            }}\r\n          />\r\n          <p style={{ fontSize: 14, color: '#999', marginTop: 8 }}>QR cho nhanh gọn lẹ nha 📱</p>\r\n        </div>\r\n\r\n        {/* Thông tin ngân hàng */}\r\n        <div style={{ fontSize: 18, lineHeight: 1.6, color: '#333' }}>\r\n          <p>\r\n            🏦 <strong>Ngân hàng:</strong> Vietcombank\r\n          </p>\r\n          <p>\r\n            🔢 <strong>Số tài khoản:</strong> 1051504398\r\n          </p>\r\n          <p>\r\n            👤 <strong>Chủ tài khoản:</strong> Hồ Thị Như Quỳnh\r\n          </p>\r\n          <p>\r\n            📝 <strong>Nội dung:</strong> {guest.code || guest.name}\r\n          </p>\r\n        </div>\r\n\r\n        {/* Nhập lời nhắn */}\r\n        <div\r\n          style={{\r\n            marginTop: 20,\r\n            textAlign: 'left',\r\n            maxWidth: 480,\r\n            marginLeft: 'auto',\r\n            marginRight: 'auto',\r\n          }}\r\n        >\r\n          <label htmlFor=\"message\" style={{ fontWeight: '600', color: '#f14e95' }}>\r\n            💌 Lời nhắn dễ thương cho tụi mình (tuỳ chọn):\r\n          </label>\r\n          <textarea\r\n            id=\"message\"\r\n            value={message}\r\n            onChange={(e) => setMessage(e.target.value)}\r\n            placeholder=\"Viết gì đó gửi đến bọn mình nhé...\"\r\n            rows={4}\r\n            style={{\r\n              width: '100%',\r\n              borderRadius: 8,\r\n              border: '1px solid #ccc',\r\n              padding: 12,\r\n              fontSize: 16,\r\n              resize: 'vertical',\r\n              marginTop: 8,\r\n            }}\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Trạng thái gửi */}\r\n      {isSubmitting && <p style={{ color: '#888', marginTop: 12, textAlign: 'center' }}>⏳ Đang gửi phản hồi...</p>}\r\n\r\n      {/* Nút RSVP */}\r\n      <div css={styButtonWrapper}>\r\n        <button className=\"btn attend\" onClick={() => handleSubmitAttendance(true)} disabled={isSubmitting}>\r\n          🎉 Tôi sẽ tham gia!\r\n        </button>\r\n\r\n        <button\r\n          className=\"btn decline\"\r\n          onClick={() => handleSubmitAttendance(false)}\r\n          disabled={isSubmitting}\r\n          style={{ marginLeft: 12 }}\r\n        >\r\n          😞 Không tham gia\r\n        </button>\r\n      </div>\r\n\r\n      {/* Nút quay lại */}\r\n      <Link to={`/?type=invitation&to=${guest.name}&code=${guest.code}`}>\r\n        <button\r\n          className=\"btn primary\"\r\n          style={{ marginTop: 24, display: 'block', marginLeft: 'auto', marginRight: 'auto' }}\r\n        >\r\n          {'< Quay về trang chính'}\r\n        </button>\r\n      </Link>\r\n    </div>\r\n  );\r\n}\r\n\r\nTicketData.propTypes = {\r\n  guest: object,\r\n  configData: object,\r\n};\r\n\r\nTicketData.defaultProps = {\r\n  guest: {},\r\n  configData: {},\r\n};\r\n\r\nexport default TicketData;\r\n","import { useState, useEffect } from 'react';\r\nimport offlineConfigData from '../../api/shift.json';\r\n\r\nfunction useConfigData() {\r\n  const [loading, setLoading] = useState(false);\r\n  const [data, setData] = useState({});\r\n\r\n  const handleFetch = async () => {\r\n    setLoading(true);\r\n\r\n    try {\r\n      setData(offlineConfigData || {});\r\n      setLoading(false);\r\n    } catch {\r\n      console.error('ERR_WHEN_HIT_DATA');\r\n      setData({});\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    handleFetch();\r\n  }, []);\r\n\r\n  return { data, loading, refetch: handleFetch };\r\n}\r\n\r\nexport default useConfigData;\r\n","import React, { useState, useEffect, useRef, useCallback } from 'react';\r\n\r\nimport MainLayout from '@components/Layout';\r\nimport Ticket from '@components/Ticket';\r\n\r\nimport getQueryValue from '@helpers/getQueryValue';\r\nimport useGuestData from '@/hooks/useGuestData';\r\nimport useConfigData from '@/hooks/useConfigData';\r\nimport { styTicket } from '@components/Ticket/styles';\r\n\r\nfunction ETicket({ location }) {\r\n  const codeEticket = getQueryValue(location, 'code') || '';\r\n  const nameEticket = getQueryValue(location, 'name') || '';\r\n  const alreadyChecked = useRef(false);\r\n\r\n  const [value, setValue] = useState('');\r\n  const [selectedGuest, setSelectedGuest] = useState({});\r\n  const [isShowTicket, setIsShowTicket] = useState(false);\r\n\r\n  const { data, loading } = useGuestData();\r\n  const { data: configData } = useConfigData();\r\n\r\n  const handleCheckTicket = useCallback(\r\n    (tempValue) => {\r\n      const guestCode = (tempValue || value).toUpperCase();\r\n      const guest = data.find((g) => (g.code || '').toUpperCase() === guestCode);\r\n\r\n      if (guest) {\r\n        if (guest.name.toUpperCase().includes(nameEticket.toUpperCase())) {\r\n          setSelectedGuest(guest);\r\n          setIsShowTicket(true);\r\n          return;\r\n        }\r\n      }\r\n\r\n      alert(`Sorry, the data code ${guestCode} was not found... Please check again.`);\r\n      window.location.assign('https://google.com');\r\n    },\r\n    [data, nameEticket, value],\r\n  );\r\n  /**\r\n   * Effect to autu-check code ticket\r\n   */\r\n  useEffect(() => {\r\n    if (codeEticket !== '' && data.length > 0 && !alreadyChecked.current) {\r\n      alreadyChecked.current = true;\r\n      setValue(codeEticket);\r\n      setTimeout(() => {\r\n        handleCheckTicket(codeEticket);\r\n      }, 1000);\r\n    }\r\n  }, [codeEticket, data.length, handleCheckTicket, loading]);\r\n\r\n  return (\r\n    <MainLayout>\r\n      <div css={styTicket}>\r\n        <div className=\"homepage\">\r\n          {isShowTicket ? (\r\n            <Ticket guest={selectedGuest} configData={configData} />\r\n          ) : (\r\n            <h3 style={{ fontSize: '1.7rem' }}>🧑‍💻Validate data. Waiting..</h3>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </MainLayout>\r\n  );\r\n}\r\n\r\nexport default ETicket;\r\n","module.exports = __webpack_public_path__ + \"static/img1-3120be86a349c17d1d15e2ca0e5f9542.jpg\";","module.exports = __webpack_public_path__ + \"static/img2-79ea2e445b9b23e65063665f1d6a32e1.jpg\";","export default function getQueryValue(location, name) {\r\n  const testedName = name.replace(/[[]/, '\\\\[').replace(/[\\]]/, '\\\\]');\r\n  const regex = new RegExp(`[\\\\?&]${testedName}=([^&#]*)`);\r\n  const results = regex.exec(location.search);\r\n\r\n  return results === null ? '' : decodeURIComponent(results[1].replace(/\\+/g, ' '));\r\n}","module.exports = __webpack_public_path__ + \"static/QR-7b8ed4a4690ac48063319a545042129e.jpg\";"],"sourceRoot":""}