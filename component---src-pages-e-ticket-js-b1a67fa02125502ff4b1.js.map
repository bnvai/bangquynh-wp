{"version":3,"sources":["webpack:///./src/components/Ticket/styles.js","webpack:///./src/components/Ticket/index.js","webpack:///./src/hooks/useConfigData.js","webpack:///./src/pages/e-ticket.js","webpack:///./src/helpers/getQueryValue.js","webpack:///./src/assets/images/QR.jpg"],"names":["styWrapper","name","styles","styTicket","TicketData","_ref","guest","configData","message","setMessage","useState","console","log","handleSubmitAttendance","async","payload","code","isAttending","fetch","method","mode","headers","body","JSON","stringify","alert","error","___EmotionJSX","css","className","style","marginBottom","color","fontFamily","fontSize","lineHeight","display","justifyContent","alignItems","gap","flexWrap","textAlign","src","qrImage","alt","width","height","borderRadius","border","margin","marginTop","maxWidth","marginLeft","marginRight","htmlFor","fontWeight","id","value","onChange","e","target","placeholder","rows","padding","resize","onClick","Link","to","defaultProps","useConfigData","loading","setLoading","data","setData","handleFetch","offlineConfigData","useEffect","refetch","ETicket","location","codeEticket","getQueryValue","nameEticket","alreadyChecked","useRef","setValue","selectedGuest","setSelectedGuest","isShowTicket","setIsShowTicket","useGuestData","handleCheckTicket","useCallback","tempValue","guestCode","toUpperCase","find","g","includes","window","assign","length","current","setTimeout","MainLayout","Ticket","testedName","replace","results","RegExp","exec","search","decodeURIComponent","module","exports"],"mappings":"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","file":"component---src-pages-e-ticket-js-b1a67fa02125502ff4b1.js","sourcesContent":["import { css } from '@emotion/core';\r\n\r\nexport const styWrapper = css`\r\n  @import url('https://fonts.googleapis.com/css?family=Roboto:300,400');\r\n  @import url('https://fonts.googleapis.com/css2?family=Pacifico&family=Work+Sans:wght@300;400;600&display=swap');\r\n\r\n  .container {\r\n    margin: 30px auto;\r\n    overflow: hidden;\r\n    box-shadow: 0 0 12px rgba(202, 202, 204, 0.5);\r\n    background-color: #fffafc;\r\n    border-radius: 12px;\r\n    padding: 0 24px;\r\n  }\r\n\r\n  .details {\r\n    color: #555;\r\n    padding: 24px 0;\r\n    border-top: 1px dashed #f7a6c1;\r\n    font-family: 'Work Sans', sans-serif;\r\n    text-align: center;\r\n  }\r\n\r\n  .tinfo {\r\n    font-size: 11px;\r\n    font-weight: 400;\r\n    color: #f14e95;\r\n    text-transform: uppercase;\r\n    letter-spacing: 1px;\r\n    margin: 20px 0 6px;\r\n  }\r\n\r\n  .tdata {\r\n    font-size: 1em;\r\n    font-weight: 400;\r\n    margin: 0;\r\n    color: #333;\r\n  }\r\n\r\n  .tdata.additional {\r\n    font-size: 14px;\r\n    color: #555;\r\n    line-height: 1.6;\r\n  }\r\n\r\n  .name {\r\n    font-size: 1.4em;\r\n    font-weight: 600;\r\n    color: #e91e63;\r\n  }\r\n\r\n  #qrcode {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    margin: 20px auto;\r\n  }\r\n\r\n  .badge {\r\n    font-size: 12px;\r\n    border-radius: 8px;\r\n    padding: 4px 10px;\r\n  }\r\n\r\n  .badge-success {\r\n    background-color: #a5d6a7;\r\n    color: #1b5e20;\r\n  }\r\n\r\n  .btn {\r\n    margin-right: 4px;\r\n    margin-top: 16px;\r\n    font-family: 'Work Sans', sans-serif;\r\n    font-size: 14px;\r\n    font-weight: 500;\r\n    border-radius: 30px;\r\n    transition: 0.3s;\r\n    padding: 10px 24px;\r\n    border: none;\r\n    cursor: pointer;\r\n  }\r\n\r\n  .primary {\r\n    background: #f14e95;\r\n    color: #fff;\r\n  }\r\n\r\n  .btn.attend {\r\n    background: #ff80ab;\r\n    color: white;\r\n  }\r\n\r\n  .btn.decline {\r\n    background: #ccc;\r\n    color: #333;\r\n  }\r\n\r\n  ul {\r\n    text-align: left;\r\n    margin: 12px auto;\r\n    display: inline-block;\r\n    padding-left: 20px;\r\n  }\r\n\r\n  li {\r\n    margin-bottom: 8px;\r\n  }\r\n\r\n  textarea {\r\n    font-family: 'Work Sans', sans-serif;\r\n  }\r\n`;\r\n\r\nexport const styTicket = css`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  min-height: calc(100vh - 18px);\r\n  padding: 0 20px;\r\n\r\n  .homepage {\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    align-items: center;\r\n    max-width: 100%;\r\n  }\r\n\r\n  .title {\r\n    font-family: 'UVN Dinh Hon', cursive;\r\n    font-weight: 600;\r\n    letter-spacing: 4px;\r\n    font-size: 45px;\r\n    user-select: none;\r\n    margin-top: 20px;\r\n    text-align: center;\r\n  }\r\n\r\n  .sub-title-ticket {\r\n    font-weight: 500;\r\n    text-transform: uppercase;\r\n    letter-spacing: 1px;\r\n    font-size: 1.7rem;\r\n    user-select: none;\r\n    margin-top: 20px;\r\n    text-align: center;\r\n  }\r\n\r\n  .input-ticket {\r\n    width: 85vw;\r\n    min-width: auto;\r\n\r\n    input {\r\n      font-family: 'Work Sans', Courier, monospace;\r\n      font-size: 18px;\r\n      width: 100%;\r\n      text-align: center;\r\n      border-radius: 12px;\r\n      padding: 10px 30px 10px 10px;\r\n      background: transparent;\r\n      border: 0.5px solid rgba(0, 0, 0, 0.3);\r\n    }\r\n\r\n    input[type='text']:disabled {\r\n      background: #dddddd;\r\n    }\r\n  }\r\n`;\r\n","import React, { useState } from 'react';\r\nimport QRCode from 'react-qr-code';\r\nimport { object } from 'prop-types';\r\nimport { Link } from 'gatsby';\r\n\r\nimport { styWrapper } from './styles';\r\nimport qrImage from '@assets/images/QR.jpg';\r\n\r\nfunction TicketData({ guest, configData }) {\r\n  const [message, setMessage] = useState('');\r\n\r\n  console.log('useState:', useState);\r\n  // Thay URL Google Apps Script của bạn vào đây\r\n  const GOOGLE_SHEET_URL =\r\n    'https://script.google.com/macros/s/AKfycbwrnp8Nz6dXBMcCtAof5B1PtUjlaaeCmnuGrtDdCk__sea7xzZYQX9KbjW7pxURaoPKAg/exec';\r\n\r\n  const handleSubmitAttendance = async (isAttending) => {\r\n    const payload = {\r\n      name: guest.name,\r\n      code: guest.code,\r\n      isAttending,\r\n      message,\r\n    };\r\n\r\n    try {\r\n      await fetch(GOOGLE_SHEET_URL, {\r\n        method: 'POST',\r\n        mode: 'no-cors',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify(payload),\r\n      });\r\n\r\n      alert(\r\n        isAttending\r\n          ? 'Cảm ơn bạn đã xác nhận tham gia nhé! 💖'\r\n          : 'Rất tiếc bạn không thể tham dự, cảm ơn bạn đã thông báo nhé!',\r\n      );\r\n\r\n      setMessage('');\r\n    } catch (error) {\r\n      alert('Gửi phản hồi thất bại rồi, bạn thử lại nhé 😢');\r\n      console.error(error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div css={styWrapper} className=\"container\">\r\n      <h2 style={{ marginBottom: 16, color: '#e91e63', fontFamily: \"'Pacifico', cursive\" }}>\r\n        ✨ Gửi Lời Chúc Dễ Thương ✨\r\n      </h2>\r\n\r\n      <p style={{ marginBottom: 12, fontSize: 16, lineHeight: 1.5, color: '#555' }}>\r\n        Tụi mình <b>rất mong được gặp bạn</b> trong ngày vui nè 🎉 Nhưng nếu bạn bị deadline dí, vướng công chuyện, hay\r\n        bị kẹt ở vũ trụ song song 🌀 thì vẫn có thể “góp vui từ xa” bằng cách cực kỳ hiện đại phía dưới đây nha 😚\r\n      </p>\r\n\r\n      <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center', gap: 32, flexWrap: 'wrap' }}>\r\n        {/* QR Code chuyển khoản */}\r\n        <div style={{ textAlign: 'center' }}>\r\n          <img\r\n            src={qrImage}\r\n            alt=\"Mã QR chuyển khoản ngân hàng\"\r\n            style={{\r\n              width: 220,\r\n              height: 220,\r\n              borderRadius: 12,\r\n              border: '1px solid #ccc',\r\n              display: 'block',\r\n              margin: '0 auto',\r\n            }}\r\n          />\r\n          <p style={{ fontSize: 14, color: '#999', marginTop: 8 }}>QR cho nhanh gọn lẹ nha 📱</p>\r\n        </div>\r\n\r\n        {/* Thông tin ngân hàng */}\r\n        <div style={{ fontSize: 18, lineHeight: 1.6, color: '#333' }}>\r\n          <p>\r\n            🏦 <strong>Ngân hàng:</strong> Vietcombank\r\n          </p>\r\n          <p>\r\n            🔢 <strong>Số tài khoản:</strong> 1051504398\r\n          </p>\r\n          <p>\r\n            👤 <strong>Chủ tài khoản:</strong> Hồ Thị Như Quỳnh\r\n          </p>\r\n          <p>\r\n            📝 <strong>Nội dung:</strong> {guest.code || guest.name}\r\n          </p>\r\n        </div>\r\n\r\n        {/* Nhập lời nhắn */}\r\n        <div\r\n          style={{\r\n            marginTop: 20,\r\n            textAlign: 'left',\r\n            maxWidth: 480,\r\n            marginLeft: 'auto',\r\n            marginRight: 'auto',\r\n          }}\r\n        >\r\n          <label htmlFor=\"message\" style={{ fontWeight: '600', color: '#f14e95' }}>\r\n            💌 Lời nhắn dễ thương cho tụi mình (tuỳ chọn):\r\n          </label>\r\n          <textarea\r\n            id=\"message\"\r\n            value={message}\r\n            onChange={(e) => setMessage(e.target.value)}\r\n            placeholder=\"Viết gì đó gửi đến bọn mình nhé...\"\r\n            rows={4}\r\n            style={{\r\n              width: '100%',\r\n              borderRadius: 8,\r\n              border: '1px solid #ccc',\r\n              padding: 12,\r\n              fontSize: 16,\r\n              resize: 'vertical',\r\n              marginTop: 8,\r\n            }}\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Nút RSVP */}\r\n      <div style={{ marginTop: 30, textAlign: 'center' }}>\r\n        <button className=\"btn attend\" onClick={() => handleSubmitAttendance(true)}>\r\n          🎉 Tôi sẽ tham gia!\r\n        </button>\r\n\r\n        <button className=\"btn decline\" onClick={() => handleSubmitAttendance(false)} style={{ marginLeft: 12 }}>\r\n          😞 Không tham gia\r\n        </button>\r\n      </div>\r\n\r\n      {/* Nút quay lại */}\r\n      <Link to={`/?type=invitation&to=${guest.name}&code=${guest.code}`}>\r\n        <button\r\n          className=\"btn primary\"\r\n          style={{ marginTop: 24, display: 'block', marginLeft: 'auto', marginRight: 'auto' }}\r\n        >\r\n          {'< Quay về trang chính'}\r\n        </button>\r\n      </Link>\r\n    </div>\r\n  );\r\n}\r\n\r\nTicketData.propTypes = {\r\n  guest: object,\r\n  configData: object,\r\n};\r\n\r\nTicketData.defaultProps = {\r\n  guest: {},\r\n  configData: {},\r\n};\r\n\r\nexport default TicketData;\r\n","import { useState, useEffect } from 'react';\r\nimport offlineConfigData from '../../api/shift.json';\r\n\r\nfunction useConfigData() {\r\n  const [loading, setLoading] = useState(false);\r\n  const [data, setData] = useState({});\r\n\r\n  const handleFetch = async () => {\r\n    setLoading(true);\r\n\r\n    try {\r\n      setData(offlineConfigData || {});\r\n      setLoading(false);\r\n    } catch {\r\n      console.error('ERR_WHEN_HIT_DATA');\r\n      setData({});\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    handleFetch();\r\n  }, []);\r\n\r\n  return { data, loading, refetch: handleFetch };\r\n}\r\n\r\nexport default useConfigData;\r\n","import React, { useState, useEffect, useRef, useCallback } from 'react';\r\n\r\nimport MainLayout from '@components/Layout';\r\nimport Ticket from '@components/Ticket';\r\n\r\nimport getQueryValue from '@helpers/getQueryValue';\r\nimport useGuestData from '@/hooks/useGuestData';\r\nimport useConfigData from '@/hooks/useConfigData';\r\nimport { styTicket } from '@components/Ticket/styles';\r\n\r\nfunction ETicket({ location }) {\r\n  const codeEticket = getQueryValue(location, 'code') || '';\r\n  const nameEticket = getQueryValue(location, 'name') || '';\r\n  const alreadyChecked = useRef(false);\r\n\r\n  const [value, setValue] = useState('');\r\n  const [selectedGuest, setSelectedGuest] = useState({});\r\n  const [isShowTicket, setIsShowTicket] = useState(false);\r\n\r\n  const { data, loading } = useGuestData();\r\n  const { data: configData } = useConfigData();\r\n\r\n  const handleCheckTicket = useCallback(\r\n    (tempValue) => {\r\n      const guestCode = (tempValue || value).toUpperCase();\r\n      const guest = data.find((g) => (g.code || '').toUpperCase() === guestCode);\r\n\r\n      if (guest) {\r\n        if (guest.name.toUpperCase().includes(nameEticket.toUpperCase())) {\r\n          setSelectedGuest(guest);\r\n          setIsShowTicket(true);\r\n          return;\r\n        }\r\n      }\r\n\r\n      alert(`Sorry, the data code ${guestCode} was not found... Please check again.`);\r\n      window.location.assign('https://google.com');\r\n    },\r\n    [data, nameEticket, value],\r\n  );\r\n  /**\r\n   * Effect to autu-check code ticket\r\n   */\r\n  useEffect(() => {\r\n    if (codeEticket !== '' && data.length > 0 && !alreadyChecked.current) {\r\n      alreadyChecked.current = true;\r\n      setValue(codeEticket);\r\n      setTimeout(() => {\r\n        handleCheckTicket(codeEticket);\r\n      }, 1000);\r\n    }\r\n  }, [codeEticket, data.length, handleCheckTicket, loading]);\r\n\r\n  return (\r\n    <MainLayout>\r\n      <div css={styTicket}>\r\n        <div className=\"homepage\">\r\n          {isShowTicket ? (\r\n            <Ticket guest={selectedGuest} configData={configData} />\r\n          ) : (\r\n            <h3 style={{ fontSize: '1.7rem' }}>🧑‍💻Validate data. Waiting..</h3>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </MainLayout>\r\n  );\r\n}\r\n\r\nexport default ETicket;\r\n","export default function getQueryValue(location, name) {\r\n  const testedName = name.replace(/[[]/, '\\\\[').replace(/[\\]]/, '\\\\]');\r\n  const regex = new RegExp(`[\\\\?&]${testedName}=([^&#]*)`);\r\n  const results = regex.exec(location.search);\r\n\r\n  return results === null ? '' : decodeURIComponent(results[1].replace(/\\+/g, ' '));\r\n}","module.exports = __webpack_public_path__ + \"static/QR-7b8ed4a4690ac48063319a545042129e.jpg\";"],"sourceRoot":""}