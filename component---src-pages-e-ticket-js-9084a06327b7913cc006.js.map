{"version":3,"sources":["webpack:///./src/components/Ticket/styles.js","webpack:///./src/components/Ticket/index.js","webpack:///./src/hooks/useConfigData.js","webpack:///./src/pages/e-ticket.js","webpack:///./src/helpers/getQueryValue.js"],"names":["styWrapper","name","styles","styTicket","TicketData","_ref","_configData$shiftType","guest","configData","___EmotionJSX","css","class","id","QRCode","value","code","size","desc","shiftType","shift","isAttended","React","Fragment","attendedAt","isExchanged","exchangedAt","style","paddingLeft","textTransform","color","Link","to","className","defaultProps","useConfigData","loading","setLoading","useState","data","setData","handleFetch","async","offlineConfigData","console","error","useEffect","refetch","ETicket","location","codeEticket","getQueryValue","nameEticket","alreadyChecked","useRef","setValue","selectedGuest","setSelectedGuest","isShowTicket","setIsShowTicket","useGuestData","handleCheckTicket","useCallback","tempValue","guestCode","toUpperCase","find","g","includes","alert","window","assign","length","current","setTimeout","MainLayout","Ticket","fontSize","testedName","replace","results","RegExp","exec","search","decodeURIComponent"],"mappings":"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","file":"component---src-pages-e-ticket-js-9084a06327b7913cc006.js","sourcesContent":["import { css } from '@emotion/core';\r\n\r\nexport const styWrapper = css`\r\n  @import url('https://fonts.googleapis.com/css?family=Roboto:300,400');\r\n\r\n  .container {\r\n    margin: 30px auto;\r\n    overflow: hidden;\r\n    box-shadow: 0 0 10px rgb(202, 202, 204);\r\n    background-color: ;\r\n    border-radius: 2px;\r\n    padding: 0 16px;\r\n  }\r\n\r\n  .ticket {\r\n    display: flex;\r\n\r\n    #qrcode {\r\n      justify-content: center;\r\n      align-content: center;\r\n      margin: 12px auto;\r\n    }\r\n  }\r\n\r\n  .details {\r\n    color: #828282;\r\n    padding: 16px 0;\r\n    border-top: 1px dashed #c3c3c3;\r\n  }\r\n\r\n  .tinfo {\r\n    font-size: 10px;\r\n    font-weight: 300;\r\n    color: #555;\r\n    font-family: 'Roboto', sans-serif;\r\n    text-transform: uppercase;\r\n    letter-spacing: 1px;\r\n    margin: 16px 0 0 0;\r\n  }\r\n\r\n  .tdata {\r\n    font-size: 1em;\r\n    font-weight: 400;\r\n    font-family: 'Roboto', sans-serif;\r\n    letter-spacing: 0.5px;\r\n    margin: 0;\r\n  }\r\n\r\n  .additional {\r\n    font-size: 10px;\r\n  }\r\n\r\n  .name {\r\n    font-size: 1.3em;\r\n    font-weight: 500;\r\n  }\r\n\r\n  .masinfo {\r\n    display: block;\r\n  }\r\n  .left,\r\n  .right {\r\n    width: 49%;\r\n    display: inline-table;\r\n  }\r\n\r\n  .nesp {\r\n    letter-spacing: 0px;\r\n  }\r\n\r\n  .btn {\r\n    margin-right: 4px;\r\n    margin-bottom: 4px;\r\n    font-family: 'Work Sans', Arial, sans-serif;\r\n    font-size: 12px;\r\n    font-weight: 400;\r\n    border-radius: 30px;\r\n    transition: 0.5s;\r\n    padding: 8px 20px;\r\n  }\r\n\r\n  .primary {\r\n    background: #f14e95;\r\n    color: #fff;\r\n    border: none;\r\n  }\r\n`;\r\n\r\nexport const styTicket = css`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  min-height: calc(100vh - 18px);\r\n  padding: 0 20px;\r\n\r\n  .homepage {\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    align-items: center;\r\n    max-width: 100%;\r\n  }\r\n\r\n  .title {\r\n    font-family: 'Cookie', cursive;\r\n    font-weight: 600;\r\n    letter-spacing: 4px;\r\n    font-size: 45px;\r\n    user-select: none;\r\n    margin-top: 20px;\r\n    text-align: center;\r\n  }\r\n\r\n  .sub-title-ticket {\r\n    font-weight: 500;\r\n    text-transform: uppercase;\r\n    letter-spacing: 1px;\r\n    font-size: 1.7rem;\r\n    user-select: none;\r\n    margin-top: 20px;\r\n    text-align: center;\r\n  }\r\n\r\n  .input-ticket {\r\n    width: 85vw;\r\n    min-width: auto;\r\n\r\n    input {\r\n      font-family: 'Work Sans', Courier, monospace;\r\n      font-size: 18px;\r\n      width: 100%;\r\n      text-align: center;\r\n      border-radius: 12px;\r\n      padding: 10px 30px 10px 10px;\r\n      background: transparent;\r\n      border: 0.5px solid rgba(0, 0, 0, 0.3);\r\n    }\r\n\r\n    input[type='text']:disabled {\r\n      background: #dddddd;\r\n    }\r\n  }\r\n`;\r\n","import React from 'react';\r\nimport QRCode from 'react-qr-code';\r\nimport { object } from 'prop-types';\r\nimport { Link } from 'gatsby';\r\n\r\nimport { styWrapper } from './styles';\r\n\r\nfunction TicketData({ guest, configData }) {\r\n  return (\r\n    <div css={styWrapper}>\r\n      <div class=\"container\">\r\n        <div class=\"ticket\">\r\n          <div id=\"qrcode\">\r\n            <QRCode value={guest.code} size={250} />\r\n          </div>\r\n        </div>\r\n        <div class=\"details\">\r\n          <div class=\"tinfo\">Nama</div>\r\n          <div class=\"tdata name\">{guest.name}</div>\r\n          <div class=\"tinfo\">Keterangan</div>\r\n          <div class=\"tdata\">{guest.desc}</div>\r\n          <div class=\"tinfo\">Syukuran Pernikahan / Shift</div>\r\n          <div class=\"tdata\">\r\n            {`${configData.shiftType?.[guest.shift]} / ${guest.shift}` || '11.00 WIB - 13.00 WIB'}\r\n          </div>\r\n          {/* attendance */}\r\n          {guest.isAttended ? (\r\n            <>\r\n              <div class=\"tinfo\">Sudah hadir pada</div>\r\n              <div class=\"tdata\">\r\n                <span class=\"badge badge-success\">{guest.attendedAt}</span>\r\n              </div>\r\n            </>\r\n          ) : null}\r\n          {/** souvenir */}\r\n          {guest.isExchanged ? (\r\n            <>\r\n              <div class=\"tinfo\">Sudah menukarkan souvenir pada</div>\r\n              <div class=\"tdata\">\r\n                <span class=\"badge badge-success\">{guest.exchangedAt}</span>\r\n              </div>\r\n            </>\r\n          ) : null}\r\n          {/* Additional info */}\r\n          <div class=\"tinfo\">Penting</div>\r\n          <div class=\"tdata additional\">\r\n            <ul style={{ paddingLeft: '16px' }}>\r\n              <li>\r\n                {`Setiap tamu yang hadir wajib menunjukkan QRCode ini sebagai pengganti buku tamu untuk untuk meminimalisir kontak fisik melalui pena.`}\r\n              </li>\r\n              <li style={{ textTransform: 'uppercase' }}>\r\n                Dalam rangka mematuhi protokol kesehatan,\r\n                <span style={{ color: '#f14e95', textTransform: 'uppercase' }}>\r\n                  {` 1 undangan hanya berlaku untuk 2 orang tamu`}\r\n                </span>\r\n              </li>\r\n            </ul>\r\n            <br />\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <Link to={`/?type=invitation&to=${guest.name}&code=${guest.code}`}>\r\n        <button className=\"btn primary\">{`< Kembali ke Homepage`}</button>\r\n      </Link>\r\n    </div>\r\n  );\r\n}\r\n\r\nTicketData.propTypes = {\r\n  guest: object,\r\n  configData: object,\r\n};\r\n\r\nTicketData.defaultProps = {\r\n  guest: {},\r\n  configData: {},\r\n};\r\n\r\nexport default TicketData;\r\n","import { useState, useEffect } from 'react';\r\nimport offlineConfigData from '../../api/shift.json';\r\n\r\nfunction useConfigData() {\r\n  const [loading, setLoading] = useState(false);\r\n  const [data, setData] = useState({});\r\n\r\n  const handleFetch = async () => {\r\n    setLoading(true);\r\n\r\n    try {\r\n      setData(offlineConfigData || {});\r\n      setLoading(false);\r\n    } catch {\r\n      console.error('ERR_WHEN_HIT_DATA');\r\n      setData({});\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    handleFetch();\r\n  }, []);\r\n\r\n  return { data, loading, refetch: handleFetch };\r\n}\r\n\r\nexport default useConfigData;\r\n","import React, { useState, useEffect, useRef, useCallback } from 'react';\r\n\r\nimport MainLayout from '@components/Layout';\r\nimport Ticket from '@components/Ticket';\r\n\r\nimport getQueryValue from '@helpers/getQueryValue';\r\nimport useGuestData from '@/hooks/useGuestData';\r\nimport useConfigData from '@/hooks/useConfigData';\r\nimport { styTicket } from '@components/Ticket/styles';\r\n\r\nfunction ETicket({ location }) {\r\n  const codeEticket = getQueryValue(location, 'code') || '';\r\n  const nameEticket = getQueryValue(location, 'name') || '';\r\n  const alreadyChecked = useRef(false);\r\n\r\n  const [value, setValue] = useState('');\r\n  const [selectedGuest, setSelectedGuest] = useState({});\r\n  const [isShowTicket, setIsShowTicket] = useState(false);\r\n\r\n  const { data, loading } = useGuestData();\r\n  const { data: configData } = useConfigData();\r\n\r\n  const handleCheckTicket = useCallback(\r\n    (tempValue) => {\r\n      const guestCode = (tempValue || value).toUpperCase();\r\n      const guest = data.find((g) => (g.code || '').toUpperCase() === guestCode);\r\n\r\n      if (guest) {\r\n        if (guest.name.toUpperCase().includes(nameEticket.toUpperCase())) {\r\n          setSelectedGuest(guest);\r\n          setIsShowTicket(true);\r\n          return;\r\n        }\r\n      }\r\n\r\n      alert(`Maaf, Kode data ${guestCode} tidak ditemukan. Mohon di cek lagi..`);\r\n      window.location.assign('https://thekusuma.com');\r\n    },\r\n    [data, nameEticket, value],\r\n  );\r\n  /**\r\n   * Effect to autu-check code ticket\r\n   */\r\n  useEffect(() => {\r\n    if (codeEticket !== '' && data.length > 0 && !alreadyChecked.current) {\r\n      alreadyChecked.current = true;\r\n      setValue(codeEticket);\r\n      setTimeout(() => {\r\n        handleCheckTicket(codeEticket);\r\n      }, 1000);\r\n    }\r\n  }, [codeEticket, data.length, handleCheckTicket, loading]);\r\n\r\n  return (\r\n    <MainLayout>\r\n      <div css={styTicket}>\r\n        <div className=\"homepage\">\r\n          {isShowTicket ? (\r\n            <Ticket guest={selectedGuest} configData={configData} />\r\n          ) : (\r\n            <h3 style={{ fontSize: '1.7rem' }}>🧑‍💻Validasi data tamu.. Mohon tunggu..</h3>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </MainLayout>\r\n  );\r\n}\r\n\r\nexport default ETicket;\r\n","export default function getQueryValue(location, name) {\r\n  const testedName = name.replace(/[[]/, '\\\\[').replace(/[\\]]/, '\\\\]');\r\n  const regex = new RegExp(`[\\\\?&]${testedName}=([^&#]*)`);\r\n  const results = regex.exec(location.search);\r\n\r\n  return results === null ? '' : decodeURIComponent(results[1].replace(/\\+/g, ' '));\r\n}"],"sourceRoot":""}